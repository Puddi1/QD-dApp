import"./modulepreload-polyfill-ec808ebb.js";import{A as X,E as j}from"./AvalancheValidatorHealthAndUpgradesFacet-3bc83553.js";import{W as O,C as q}from"./web3-provider-fa690591.js";let N=document.getElementById("toggle-button"),k=document.getElementById("sidebar"),S=document.getElementById("center-bar"),h=!1;N.addEventListener("click",()=>{h?(k.classList.remove("visible"),S.classList.remove("visible"),N.classList.remove("visible"),h=!1):(k.classList.add("visible"),S.classList.add("visible"),N.classList.add("visible"),h=!0)});window.CSS.supports("backdrop-filter","blur(10px)")||(k.style.backgroundImage="linear-gradient(rgb(75, 0, 0, 0.9), rgba(50, 0, 0, 0.5))");let v=new O(window.ethereum),R="0xBd24e0Fb10Ff5f9257FD5f3ACf566CA4c2519b8f",P=new q(R,X.abi,v),z=new q(R,j.abi,v),T,W;const C=document.getElementById("button-metamask");C.addEventListener("click",async()=>{if(typeof window.ethereum<"u"){await v.send("eth_requestAccounts",[]),T=v.getSigner();let e=await T.getAddress();W=P.connect(T),await U(e,(await v.getNetwork()).chainId),await w()}else alert("Install Metamask")});let u=document.getElementById("balanceText-level1"),r=document.getElementById("balanceText-level2"),l=document.getElementById("balanceText-level3"),i=document.getElementById("balanceText-level4"),a=document.getElementById("balanceText-level5"),F=0,f=0,p=0,g=0,D=0;async function w(){let e=[];for(let n=0;n<5;++n)e[n]=(await z.balanceOf(await T.getAddress(),n)).toString();u.innerHTML=""+e[0],r.innerHTML=""+e[1],l.innerHTML=""+e[2],i.innerHTML=""+e[3],a.innerHTML=""+e[4],F=Number(e[0]),f=Number(e[1]),p=Number(e[2]),g=Number(e[3]),D=Number(e[4])}let M=document.getElementById("upgradeText-level1"),H=document.getElementById("upgradeText-level2"),b=document.getElementById("upgradeText-level3"),y=document.getElementById("upgradeText-level4"),d=0,c=0,m=0,o=0,G=document.getElementById("minusLevel1"),J=document.getElementById("minusLevel2"),K=document.getElementById("minusLevel3"),Q=document.getElementById("minusLevel4"),Y=document.getElementById("plusLevel1"),Z=document.getElementById("plusLevel2"),_=document.getElementById("plusLevel3"),$=document.getElementById("plusLevel4");G.addEventListener("click",async()=>{await L(1,!1)});Y.addEventListener("click",async()=>{await L(1,!0)});J.addEventListener("click",async()=>{await L(2,!1)});Z.addEventListener("click",async()=>{await L(2,!0)});K.addEventListener("click",async()=>{await L(3,!1)});_.addEventListener("click",async()=>{await L(3,!0)});Q.addEventListener("click",async()=>{await L(4,!1)});$.addEventListener("click",async()=>{await L(4,!0)});let E=!0,A=!0,B=!0,x=!0;document.addEventListener("keypress",async e=>{(e.key==1||e.key==2||e.key==3||e.key==4)&&a.innerHTML!="/"&&await ee(e.key)});async function ee(e){if(e==1){if(E){let n=Number(u.innerHTML),t=Math.floor(n/10);u.innerHTML=Number(u.innerHTML)-t*10,M.innerHTML=Number(M.innerHTML)+t,d+=t,r.innerHTML=Number(r.innerHTML)+t,await s(1)}else{let n=Number(r.innerHTML),t=n*10;u.innerHTML=Number(u.innerHTML)+t,M.innerHTML=Number(M.innerHTML)-n,d-=n,r.innerHTML=Number(r.innerHTML)-n,await s(1)}E=!E}else if(e==2){if(A){let n=Number(r.innerHTML),t=Math.floor(n/10);r.innerHTML=Number(r.innerHTML)-t*10,H.innerHTML=Number(H.innerHTML)+t,c+=t,l.innerHTML=Number(l.innerHTML)+t,await s(2)}else{let n=Number(l.innerHTML),t=n*10;r.innerHTML=Number(r.innerHTML)+t,H.innerHTML=Number(H.innerHTML)-n,c-=n,l.innerHTML=Number(l.innerHTML)-n,await s(2)}A=!A}else if(e==3){if(B){let n=Number(l.innerHTML),t=Math.floor(n/10);l.innerHTML=Number(l.innerHTML)-t*10,b.innerHTML=Number(b.innerHTML)+t,m+=t,i.innerHTML=Number(i.innerHTML)+t,await s(3)}else{let n=Number(i.innerHTML),t=n*10;l.innerHTML=Number(l.innerHTML)+t,b.innerHTML=Number(b.innerHTML)-n,m-=n,i.innerHTML=Number(i.innerHTML)-n,await s(3)}B=!B}else if(e==4){if(x){let n=Number(i.innerHTML),t=Math.floor(n/10);i.innerHTML=Number(i.innerHTML)-t*10,y.innerHTML=Number(y.innerHTML)+t,o+=t,a.innerHTML=Number(a.innerHTML)+t,await s(4)}else{let n=Number(a.innerHTML),t=n*10;i.innerHTML=Number(i.innerHTML)+t,y.innerHTML=Number(y.innerHTML)-n,o-=n,a.innerHTML=Number(a.innerHTML)-n,await s(4)}x=!x}}async function L(e,n){if(e==1)if(n){if(Number(u.innerHTML)-10<0)return;d+=1,M.innerHTML=d,r.innerHTML=Number(r.innerHTML)+1,u.innerHTML=Number(u.innerHTML)-10,await s(1)}else{if(d==0||Number(r.innerHTML)==0)return;d-=1,M.innerHTML=d,r.innerHTML=Number(r.innerHTML)-1,u.innerHTML=Number(u.innerHTML)+10,await s(1)}else if(e==2)if(n){if(Number(r.innerHTML)-10<0)return;c+=1,H.innerHTML=c,l.innerHTML=Number(l.innerHTML)+1,r.innerHTML=Number(r.innerHTML)-10,await s(2)}else{if(c==0||Number(l.innerHTML)==0)return;c-=1,H.innerHTML=c,l.innerHTML=Number(l.innerHTML)-1,r.innerHTML=Number(r.innerHTML)+10,await s(2)}else if(e==3)if(n){if(Number(l.innerHTML)-10<0)return;m+=1,b.innerHTML=m,i.innerHTML=Number(i.innerHTML)+1,l.innerHTML=Number(l.innerHTML)-10,await s(3)}else{if(m==0||Number(i.innerHTML)==0)return;m-=1,b.innerHTML=m,i.innerHTML=Number(i.innerHTML)-1,l.innerHTML=Number(l.innerHTML)+10,await s(3)}else if(e==4)if(n){if(Number(i.innerHTML)-10<0)return;o+=1,y.innerHTML=o,a.innerHTML=Number(a.innerHTML)+1,i.innerHTML=Number(i.innerHTML)-10,await s(4)}else{if(o==0||Number(a.innerHTML)==0)return;o-=1,y.innerHTML=o,a.innerHTML=Number(a.innerHTML)-1,i.innerHTML=Number(i.innerHTML)+10,await s(4)}}async function s(e){e==1?(u.innerHTML>F?u.style.color="green":u.innerHTML<F?u.style.color="red":u.style.color="white",r.innerHTML>f?r.style.color="green":r.innerHTML<f?r.style.color="red":r.style.color="white"):e==2?(r.innerHTML>f?r.style.color="green":r.innerHTML<f?r.style.color="red":r.style.color="white",l.innerHTML>p?l.style.color="green":l.innerHTML<p?l.style.color="red":l.style.color="white"):e==3?(l.innerHTML>p?l.style.color="green":l.innerHTML<p?l.style.color="red":l.style.color="white",i.innerHTML>g?i.style.color="green":i.innerHTML<g?i.style.color="red":i.style.color="white"):e==4&&(i.innerHTML>g?i.style.color="green":i.innerHTML<g?i.style.color="red":i.style.color="white",a.innerHTML>D?a.style.color="green":a.innerHTML<D?a.style.color="red":a.style.color="white")}let ne=document.getElementById("upgradeIcon"),I=document.getElementsByClassName("upgradesText");ne.addEventListener("click",async()=>{let e=[],n=[];console.log(I);for(let t=0;t<I.length;++t){let V=Number(I[t].innerHTML);V!=0&&(e.push(t),n.push(V))}e.length>0&&(await(await W.upgradeAvalancheValidatorLevel(e,n,{gasLimit:3e6})).wait(1),await w())});const te=document.getElementById("metamask");async function U(e,n){e!=null?(te.style.opacity="0",C.innerHTML=e[0]+e[1]+e[2]+e[3]+e[4]+e[5]+".."):C.innerHTML="Disconnected",(n!="0xa869"||n!=43113)&&n!=null&&window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:"0xa869",rpcUrls:["https://api.avax-test.network/ext/bc/C/rpc"],chainName:"Avalanche Fuji Testnet",nativeCurrency:{name:"AVAX",symbol:"AVAX",decimals:18},blockExplorerUrls:["https://testnet.snowtrace.io/"]}]})}window.ethereum.on("chainChanged",async function(e){if(T!=null){let n=await T.getAddress();await U(n,e),await w()}});window.ethereum.on("accountsChanged",async function(e){T!=null&&(await U(e[0],void 0),await w())});
