import"./modulepreload-polyfill-ec808ebb.js";import{A as b,a as B}from"./AvalancheValidatorSettersAndGettersFacet-ae5f184e.js";import{W as A,C as g}from"./web3-provider-fa690591.js";let l=document.getElementById("toggle-button"),r=document.getElementById("sidebar"),u=document.getElementById("center-bar"),d=!1;l.addEventListener("click",()=>{d?(r.classList.remove("visible"),u.classList.remove("visible"),l.classList.remove("visible"),d=!1):(r.classList.add("visible"),u.classList.add("visible"),l.classList.add("visible"),d=!0)});window.CSS.supports("backdrop-filter","blur(10px)")||(r.style.backgroundImage="linear-gradient(rgb(75, 0, 0, 0.9), rgba(50, 0, 0, 0.5))");let a=new A(window.ethereum),h="",E=new g(h,b.abi,a),v=new g(h,B.abi,a),n,w;const c=document.getElementById("button-metamask");c.addEventListener("click",async()=>{if(typeof window.ethereum<"u"){await a.send("eth_requestAccounts",[]),n=a.getSigner();let e=await n.getAddress();w=E.connect(n),await m(e,(await a.getNetwork()).chainId)}else alert("Install Metamask")});const k=document.getElementById("address-input");k.addEventListener("change",async()=>{await p()});let i=document.getElementsByName("level");console.log(i);for(let e=0;e<i.length;e++)i[e].addEventListener("click",async()=>{await p()});async function f(){for(let e=0;e<i.length;e++)if(i[e].checked==!0)return i[e].value}const o=document.getElementById("avalanche");async function p(){let e=document.getElementById("address-input"),t=await f();if(e.value.length==42&&e.value[0]==0&&e.value[1]=="x"&&t!=null&&n!=null){let s=(await v.getOwnerHealth(e.value,t)).toString();(await a.getBlock(await a.getBlockNumber())).timestamp-s>=60*60*4&&s>0?(console.log("not healthy == go and manage"),o.style.filter="invert(80%) sepia(15%) saturate(5577%) hue-rotate(77deg) brightness(106%) contrast(102%)"):(console.log("not healthy == don't go and manage"),o.style.filter="invert(57%) sepia(74%) saturate(5550%) hue-rotate(336deg) brightness(93%) contrast(79%)")}else console.log("undefined values"),o.style.filter=""}const I=document.getElementById("manage-button");I.addEventListener("click",async()=>{let e=document.getElementById("address-input"),t=await f(),s=(await v.getOwnerHealth(e.value,t)).toString();(await a.getBlock(await a.getBlockNumber())).timestamp-s>60*60*4&&s>0&&await(await w.manageInactiveValidatorShares(e.value,t,{gasLimit:3e6})).wait(1)});const L=document.getElementById("metamaskIcon");async function m(e,t){e!=null?(L.style.opacity="0",c.innerHTML=e[0]+e[1]+e[2]+e[3]+e[4]+e[5]+".."):c.innerHTML="Disconnected",(t!="0xa869"||t!=43113)&&t!=null&&window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:"0xa869",rpcUrls:["https://api.avax-test.network/ext/bc/C/rpc"],chainName:"Avalanche Fuji Testnet",nativeCurrency:{name:"AVAX",symbol:"AVAX",decimals:18},blockExplorerUrls:["https://testnet.snowtrace.io/"]}]})}window.ethereum.on("chainChanged",async function(e){if(n!=null){let t=await n.getAddress();await m(t,e)}});window.ethereum.on("accountsChanged",async function(e){n!=null&&await m(e[0],void 0)});
